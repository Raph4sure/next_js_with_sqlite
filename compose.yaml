services:
    server:
        build:
            context: .
            dockerfile: Dockerfile
        ports:
            - 3000:3000

        environment:
            - DATABASE_URL=file:./prisma/dev.db

        volumes:
            - ./prisma:/app/prisma

        develop:
            watch:
                - path: ./package.json
                  action: rebuild
                - path: ./package-lock.json
                  action: rebuild
                - path: .
                  target: /app
                  action: sync
                  ignore:
                      - node_modules
                      - .next/
                      - prisma/dev.db
